(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{177:function(t,e,i){"use strict";i.r(e);var r=i(0),a=Object(r.a)({},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"content"},[t._m(0),t._v(" "),i("p",[t._v("本文会下载最新的druid，单机部署后加载一些数据并进行查询。")]),t._v(" "),t._m(1),t._v(" "),t._m(2),t._v(" "),t._m(3),t._v(" "),i("p",[t._v("通过在终端输入以下指令，来安装Druid：")]),t._v(" "),t._m(4),t._m(5),t._v(" "),t._m(6),t._v(" "),i("p",[t._v("Druid依赖zookeeper进行分布式系统的协调，你需要下载并运行Zookeeper。")]),t._v(" "),t._m(7),t._m(8),t._v(" "),i("p",[t._v("当Zookeeper启动后，返回druid-0.9.2的目录。在根目录下，执行以下指令：")]),t._v(" "),t._m(9),i("p",[t._v("这会为你设置一些目录。然后，你可以在不同的终端窗口启动多个Druid 进程。在本教程中会在同一系统中运行所有Druid进程，在一些大型分布式集群中也可以将一些Druid进程配置在一起。")]),t._v(" "),t._m(10),i("p",[t._v("当服务启动后你能看到一条日志信息被打印。\n如果你想停止服务，CTRL-C 可以退出正在运行的java进程。服务停止后，如果你想干净的启动，删除var目录并且重新执行init脚本。\n每次服务启动后，你都可以加载数据了。\n批量加载数据\n")]),t._m(11),i("p"),t._v(" "),i("p",[t._v("除了时间维度以外，在维基百科的数据集中的维度dimensions （可以过滤和拆分的属性），还包括：")]),t._v(" "),t._m(12),t._v(" "),i("p",[t._v("在Druid（能够聚合的值）中维基百科数据集中有如下已知度量方式：")]),t._v(" "),t._m(13),t._v(" "),i("p",[t._v("你可以提交一个指向文件的数据提取任务，向Druid中加载数据。我们已经包含了一个任务，能够加载归档文件中的wikiticker-2015-09-12-sampled.json文件。打开一个新的终端窗口，进入druid-0.9.2目录，然后将这个任务提交到Druid：")]),t._v(" "),t._m(14),i("p",[t._v("如果任务提交成功，将会打印输出任务的ID")]),t._v(" "),t._m(15),i("p",[t._v("可以通过"),i("a",{attrs:{href:"http://localhost:8090/console.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("控制台"),i("OutboundLink")],1),t._v('控制台界面，查看任务的状态。你可以定期的刷新界面，当任务成功的时候，任务状态会变成"SUCCESS"。\n当数据提取任务结束后，数据会被historical nodes加载，然后一两分钟后就可以查询到了。你可以通过协调器控制台界面来监控数据加载的进度，登录'),i("a",{attrs:{href:"http://localhost:8081/#/",target:"_blank",rel:"noopener noreferrer"}},[t._v("控制台"),i("OutboundLink")],1),t._v(' 界面，观察是否存在一个"wikiticker"数据源，如果有一个蓝色圆圈则表明该数据完全可用。\n一旦数据已经完全可用，你就能立即查询到它-通过下面的数据查询章节可以学习如何进行查询。或者如果你想加载不同的数据集，你也能够继续加载想要的数据部分。\n加载流式数据\n我们可以通过简单的HTTP API将事件推送到Druid，来加载流式数据。为了实现这点我们需要用到一个高级别的data producer库Tranquility。\n执行以下指令来下载\nTranquility：')]),t._v(" "),t._m(16),i("p",[t._v("在Druid配置文件conf-quickstart/tranquility/server.json里面已经包含了配置，作为Druid分发的一个metrics datasource。将Tranquility服务进程启动，就可以将时间直接推送到Druid了。")]),t._v(" "),t._m(17),t._m(18),t._v("\n数据源的维度（能够过滤和拆分的属性）是灵活的。无模式维度的配置意味着Druid能够接受JSON输入中的任意字段作为维度。\n此数据源中的metrics度量（可以聚合的值）为：\n* count\n* value_sum (从输入中导出)\n* value_min (从输入中导出)\n* value_max (从输入中导出)\n"),i("p",[t._v("我们内置了一些脚本，可以生成一些随机样本维度加载到此数据源中。你可以在Druid分发库中执行以下指令来使用它：")]),t._v(" "),t._m(19),i("p",[t._v("然后会打印输出类似如下信息：")]),t._v(" "),t._m(20),i("p",[t._v("这表示HTTP服务器收到你发送的25个事件，并且向Druid发送了25个。请注意，这可能需要几秒钟来完成第一次运行，因为必须要给摄取任务分配Druid资源。后续的POSTS应该能快速完成。\n一旦数据发送到Druid，就能够马上查询到它了。")]),t._v(" "),t._m(21),t._v(" "),t._m(22),t._v(" "),i("p",[t._v("Druid支持一系列基于JSON的查询。我们在quickstart/wikiticker-top-pages.json中包含了一个topN查询的示例，它会在此数据集中找到最多编辑的文章：")]),t._v(" "),t._m(23),t._m(24),t._v(" "),i("p",[t._v("Druid是面向高级用户的分析应用程序的理想选择。有许多不同的开源软件用Druid进行数据的可视化和探索。 我们建议尝试Pivot，Caravel或Metabase对刚摄取的数据进行可视化。\n例如，如果您安装了Pivot，您应该可以在浏览器中的localhost:9090查看您的数据。")]),t._v(" "),t._m(25),t._v(" "),i("p",[t._v("对于Druid，我们还有更多的查询工具，包括SQL引擎和各种语言（如python和Ruby）的库。更多信息请参考库列表。")]),t._v(" "),t._m(26),t._v(" "),i("p",[t._v("此快速入门将使您能在单个计算机上运行的所有服务。 下一步是加载您自己的数据。 或者，您可以跳过去运行一个分布式集群。")])])},[function(){var t=this.$createElement,e=this._self._c||t;return e("h1",{attrs:{id:"快速开始"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#快速开始","aria-hidden":"true"}},[this._v("#")]),this._v(" 快速开始")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"前提条件需要："}},[e("a",{staticClass:"header-anchor",attrs:{href:"#前提条件需要：","aria-hidden":"true"}},[this._v("#")]),this._v(" 前提条件需要：")])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[this._v("java7及其以上版本")]),this._v(" "),e("li",[this._v("Linux, Mac OS X, or other Unix-like OS，不支持windows")]),this._v(" "),e("li",[this._v("8G内存")]),this._v(" "),e("li",[this._v("2核CPU")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"入门"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#入门","aria-hidden":"true"}},[this._v("#")]),this._v(" 入门")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("curl -O http://static.druid.io/artifacts/releases/druid-0.9.2-bin.tar.gz\ntar -xzf druid-0.9.2-bin.tar.gz\ncd druid-0.9.2\n")])])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("ul",[i("li",[t._v("在druid包下，有以下内容：")]),t._v(" "),i("li",[t._v("LICENSE - license文件")]),t._v(" "),i("li",[t._v("bin/ - 对此quickstart有用的脚本")]),t._v(" "),i("li",[t._v("conf/ - 集群设置的配置模板")]),t._v(" "),i("li",[t._v("conf-quickstart/ - 此quickstart的配置")]),t._v(" "),i("li",[t._v("extensions/ - Druid的所有扩展")]),t._v(" "),i("li",[t._v("haddop-dependencies/ - Druid haddop的依赖")]),t._v(" "),i("li",[t._v("lib/ - 所有Druid核心包含的包")]),t._v(" "),i("li",[t._v("quickstart/ - 对此quickstart有用的文件")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"启动zookeeper"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#启动zookeeper","aria-hidden":"true"}},[this._v("#")]),this._v(" 启动zookeeper")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("curl http://www.gtlib.gatech.edu/pub/apache/zookeeper/zookeeper-3.4.6/zookeeper-3.4.6.tar.gz -o zookeeper-3.4.6.tar.gz\ntar -xzf zookeeper-3.4.6.tar.gz\ncd zookeeper-3.4.6\ncp conf/zoo_sample.cfg conf/zoo.cfg\n./bin/zkServer.sh start\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"启动druid服务"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#启动druid服务","aria-hidden":"true"}},[this._v("#")]),this._v(" 启动Druid服务")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("bin/init\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v('java `cat conf-quickstart/druid/historical/jvm.config | xargs` -cp "conf-quickstart/druid/_common:conf-quickstart/druid/historical:lib/*" io.druid.cli.Main server historical\njava `cat conf-quickstart/druid/broker/jvm.config | xargs` -cp "conf-quickstart/druid/_common:conf-quickstart/druid/broker:lib/*" io.druid.cli.Main server broker\njava `cat conf-quickstart/druid/coordinator/jvm.config | xargs` -cp "conf-quickstart/druid/_common:conf-quickstart/druid/coordinator:lib/*" io.druid.cli.Main server coordinator\njava `cat conf-quickstart/druid/overlord/jvm.config | xargs` -cp "conf-quickstart/druid/_common:conf-quickstart/druid/overlord:lib/*" io.druid.cli.Main server overlord\njava `cat conf-quickstart/druid/middleManager/jvm.config | xargs` -cp "conf-quickstart/druid/_common:conf-quickstart/druid/middleManager:lib/*" io.druid.cli.Main server middleManager\n')])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"tip custom-block"},[e("p",{staticClass:"custom-block-title"},[this._v("提示")]),this._v(" "),e("p",[this._v("为了便于你开始使用Druid，我们收录了2016年9月12号维基百科的编辑示例。\n本节介绍如何批量加载数据，但是你可以跳过开头直接学习如何加载实时数据流。Druid的流媒体摄取能够在事件发生和可查询之间无时延的加载数据。")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("ul",[i("li",[t._v("channel")]),t._v(" "),i("li",[t._v("cityName")]),t._v(" "),i("li",[t._v("comment")]),t._v(" "),i("li",[t._v("countryIsoCode")]),t._v(" "),i("li",[t._v("countryName")]),t._v(" "),i("li",[t._v("isAnonymous")]),t._v(" "),i("li",[t._v("isMinor")]),t._v(" "),i("li",[t._v("isNew")]),t._v(" "),i("li",[t._v("isRobot")]),t._v(" "),i("li",[t._v("isUnpatrolled")]),t._v(" "),i("li",[t._v("metroCode")]),t._v(" "),i("li",[t._v("namespace")]),t._v(" "),i("li",[t._v("page")]),t._v(" "),i("li",[t._v("regionIsoCode")]),t._v(" "),i("li",[t._v("regionName")]),t._v(" "),i("li",[t._v("user")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("ul",[i("li",[t._v("count")]),t._v(" "),i("li",[t._v("added")]),t._v(" "),i("li",[t._v("deleted")]),t._v(" "),i("li",[t._v("delta")]),t._v(" "),i("li",[t._v("user_unique")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("curl -X 'POST' -H 'Content-Type:application/json' -d @quickstart/wikiticker-index.json localhost:8090/druid/indexer/v1/task\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v('{"task":"index_hadoop_wikipedia_2013-10-09T21:30:32.802Z"}\n')])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("curl -O http://static.druid.io/tranquility/releases/tranquility-distribution-0.8.0.tgz\ntar -xzf tranquility-distribution-0.8.0.tgz\ncd tranquility-distribution-0.8.0\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("bin/tranquility server -configFile <path_to_druid_distro>/conf-quickstart/tranquility/server.json\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"tip custom-block"},[e("p",{staticClass:"custom-block-title"},[this._v("提示")]),this._v(" "),e("p",[this._v("本节介绍了如何使用Tranquility加载数据，但Druid还支持各种其他的流式传输方式，包括现在比较流行的流技术，如Kafka, Storm, Samza和Spark Streaming。")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("bin/generate-example-metrics | curl -XPOST -H'Content-Type: application/json' --data-binary @- http://localhost:8200/v1/post/metrics\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v('{"result":{"received":25,"sent":25}}\n')])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"数据查询"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#数据查询","aria-hidden":"true"}},[this._v("#")]),this._v(" 数据查询")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"直接druid查询"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#直接druid查询","aria-hidden":"true"}},[this._v("#")]),this._v(" 直接Druid查询")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("curl -L -H'Content-Type: application/json' -XPOST --data-binary @quickstart/wikiticker-top-pages.json http://localhost:8082/druid/v2/?pretty\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"可视化数据"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#可视化数据","aria-hidden":"true"}},[this._v("#")]),this._v(" 可视化数据")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"sql和其它查询库"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#sql和其它查询库","aria-hidden":"true"}},[this._v("#")]),this._v(" SQL和其它查询库")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"集群安装"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#集群安装","aria-hidden":"true"}},[this._v("#")]),this._v(" 集群安装")])}],!1,null,null,null);a.options.__file="快速开始.md";e.default=a.exports}}]);